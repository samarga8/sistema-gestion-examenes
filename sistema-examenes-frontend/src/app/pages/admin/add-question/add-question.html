<div class="question-container">
  <mat-card class="question-card">
    <mat-card-header class="card-header">
      <mat-card-title class="main-title">
        <mat-icon class="title-icon">quiz</mat-icon>
        Agregar Pregunta
      </mat-card-title>
      <mat-card-subtitle class="main-subtitle">
        <span *ngIf="!loading">
          Examen: <span class="exam-title">{{ question.exam.title || 'Sin título' }}</span>
        </span>
        <span *ngIf="loading" class="loading-text">
          <mat-spinner diameter="16"></mat-spinner>
          Cargando información del examen...
        </span>
      </mat-card-subtitle>
    
    </mat-card-header>

    <mat-card-content class="card-content">
      <div class="question-section">
        <form *ngIf="pregunta" (ngSubmit)="actualizarDatosDeLaPregunta()" class="question-form">
          
          <!-- Contenido de la pregunta -->
          <div class="form-row">
            <mat-form-field class="full-width" appearance="outline">
              <mat-label>Contenido de la Pregunta</mat-label>
              <textarea 
                [(ngModel)]="question.content" 
                name="content" 
                matInput 
                rows="6"
                placeholder="Escribe aquí el contenido de la pregunta"
                required>
              </textarea>
              <mat-icon matSuffix>edit</mat-icon>
            </mat-form-field>
          </div>

          <!-- Opciones de respuesta -->
          <div class="options-section">
            <h3 class="section-title">
              <mat-icon>list</mat-icon>
              Opciones de Respuesta
            </h3>
            
            <div class="form-row two-columns">
              <mat-form-field appearance="outline">
                <mat-label>Opción 1</mat-label>
                <input 
                  [(ngModel)]="question.option1" 
                  name="option1" 
                  type="text" 
                  matInput 
                  placeholder="Primera opción"
                  required>
                <mat-icon matSuffix>looks_one</mat-icon>
              </mat-form-field>

              <mat-form-field appearance="outline">
                <mat-label>Opción 2</mat-label>
                <input 
                  [(ngModel)]="question.option2" 
                  name="option2" 
                  type="text" 
                  matInput 
                  placeholder="Segunda opción"
                  required>
                <mat-icon matSuffix>looks_two</mat-icon>
              </mat-form-field>
            </div>

            <div class="form-row two-columns">
              <mat-form-field appearance="outline">
                <mat-label>Opción 3</mat-label>
                <input 
                  [(ngModel)]="question.option3" 
                  name="option3" 
                  type="text" 
                  matInput 
                  placeholder="Tercera opción">
                <mat-icon matSuffix>looks_3</mat-icon>
              </mat-form-field>

              <mat-form-field appearance="outline">
                <mat-label>Opción 4</mat-label>
                <input 
                  [(ngModel)]="question.option4" 
                  name="option4" 
                  type="text" 
                  matInput 
                  placeholder="Cuarta opción">
                <mat-icon matSuffix>looks_4</mat-icon>
              </mat-form-field>
            </div>
          </div>

          <!-- Respuesta correcta -->
          <div class="form-row">
            <mat-form-field class="full-width" appearance="outline">
              <mat-label>Respuesta Correcta</mat-label>
              <mat-select [(ngModel)]="question.answer" name="answer" required>
                <mat-option value="">
                  <em>Selecciona la respuesta correcta</em>
                </mat-option>
                <mat-option *ngIf="question.option1" [value]="question.option1">
                  <mat-icon>looks_one</mat-icon>
                  A) {{ question.option1 }}
                </mat-option>
                <mat-option *ngIf="question.option2" [value]="question.option2">
                  <mat-icon>looks_two</mat-icon>
                  B) {{ question.option2 }}
                </mat-option>
                <mat-option *ngIf="question.option3" [value]="question.option3">
                  <mat-icon>looks_3</mat-icon>
                  C) {{ question.option3 }}
                </mat-option>
                <mat-option *ngIf="question.option4" [value]="question.option4">
                  <mat-icon>looks_4</mat-icon>
                  D) {{ question.option4 }}
                </mat-option>
              </mat-select>
              <mat-icon matSuffix>check_circle</mat-icon>
              
            </mat-form-field>
          </div>

          <!-- Botones -->
          <div class="form-row button-row">
            <button mat-raised-button color="primary" type="submit">
              <mat-icon>save</mat-icon>
              Guardar Pregunta
            </button>
            <button mat-raised-button color="warn" type="button" routerLink="/admin/exams">
              <mat-icon>cancel</mat-icon>
              Cancelar
            </button>
          </div>
        </form>
      </div>
      
    
    </mat-card-content>
  </mat-card>
</div>