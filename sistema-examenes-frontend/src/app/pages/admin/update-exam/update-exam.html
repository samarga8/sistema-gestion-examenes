<div class="exam-container">
    <mat-card class="exam-card">
        <mat-card-header class="card-header">
            <mat-card-title class="main-title">
                <mat-icon class="title-icon">edit</mat-icon>
                Actualizar Examen
            </mat-card-title>
            <mat-card-subtitle class="main-subtitle">
                Modifica los datos del examen
            </mat-card-subtitle>
        </mat-card-header>

        <mat-card-content class="card-content">
            <div class="exam-section">
                <!-- Mostrar mensaje de carga -->
                <div *ngIf="loading" class="loading-message">
                    <mat-icon>hourglass_empty</mat-icon>
                    <p>Cargando examen...</p>
                </div>

                <!-- Formulario del examen -->
                <form *ngIf="!loading" (ngSubmit)="updateExam()" class="exam-form">

                    <!-- Título -->
                    <div class="form-row">
                        <mat-form-field class="full-width" appearance="outline">
                            <mat-label>Título del Examen</mat-label>
                            <input [(ngModel)]="exam.title" name="title" type="text" required
                                placeholder="Digite el título del examen" matInput />
                            <mat-icon matSuffix>title</mat-icon>
                        </mat-form-field>
                    </div>

                    <!-- Descripción -->
                    <div class="form-row">
                        <mat-form-field class="full-width" appearance="outline">
                            <mat-label>Descripción</mat-label>
                            <textarea [(ngModel)]="exam.description" name="description"
                                placeholder="Digite la descripción del examen" matInput rows="4">
                            </textarea>
                            <mat-icon matSuffix>description</mat-icon>
                        </mat-form-field>
                    </div>

                    <!-- Puntos y preguntas -->
                    <div class="form-row two-columns">
                        <mat-form-field appearance="outline">
                            <mat-label>Puntos Máximos</mat-label>
                            <input [(ngModel)]="exam.pointMax" name="pointMax" type="number" placeholder="Ej: 100"
                                matInput />
                            <mat-icon matSuffix>star</mat-icon>
                        </mat-form-field>

                        <mat-form-field appearance="outline">
                            <mat-label>Número de Preguntas</mat-label>
                            <input [(ngModel)]="exam.numberQuestions" name="numberQuestions" type="number"
                                placeholder="Ej: 20" matInput />
                            <mat-icon matSuffix>help</mat-icon>
                        </mat-form-field>
                    </div>

                    <!-- Categoría y estado -->
                    <div class="form-row two-columns">
                        <mat-form-field appearance="outline">
                            <mat-label>Categoría</mat-label>
                            <mat-select [(ngModel)]="selectedCategoryId" name="category">
                                <mat-option *ngFor="let c of categories" [value]="c.categoryId">
                                    {{c.title}}
                                </mat-option>
                            </mat-select>
                            <mat-icon matSuffix>category</mat-icon>
                        </mat-form-field>

                        <div class="toggle-container">
                            <mat-slide-toggle [(ngModel)]="exam.active" name="active" color="primary">
                                Publicar Examen
                            </mat-slide-toggle>
                        </div>
                    </div>

                    <!-- Botones -->
                    <div class="form-row button-row">
                        <button mat-raised-button color="primary" type="submit">
                            <mat-icon>update</mat-icon> Actualizar
                        </button>
                        <button mat-raised-button color="warn" type="button" routerLink="/admin/exams">
                            <mat-icon>cancel</mat-icon> Cancelar
                        </button>
                    </div>
                </form>
            </div>
        </mat-card-content>
    </mat-card>
</div>
